<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Accreditation Office - Crescat Entitlement System</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg-main: hsl(204, 77%, 12%);
      --bg-sidebar: hsl(205, 64%, 14%);
      --bg-content: hsl(204, 77%, 12%);
      --bg-hover: hsl(205, 57%, 16%);
      --bg-active: hsl(205, 47%, 19%);
      --bg-input: hsl(205, 68%, 14%);
      --bg-row: hsl(204, 77%, 12%);
      --bg-row-alt: hsl(205, 64%, 14%);
      --bg-row-hover: hsl(205, 57%, 16%);
      --text-default: hsl(205, 42%, 84%);
      --text-soft: hsl(205, 16%, 57%);
      --text-inverted: hsl(204, 77%, 12%);
      --text-link: hsl(203, 90%, 48%);
      --border-default: hsl(203, 44%, 20%);
      --border-soft: hsl(204, 52%, 17%);
      --color-success: hsl(151, 61%, 43%);
      --color-primary: hsl(205, 69%, 33%);
      --color-pending: hsl(44, 88%, 66%);
      --color-warning: hsl(0, 88%, 66%);
      --color-highlight: #45A4E4;
    }
    body { background: var(--bg-main); color: var(--text-default); font-family: 'Inter', sans-serif; font-size: 14px; }
    * { scrollbar-width: thin; scrollbar-color: var(--border-default) transparent; box-sizing: border-box; }
    ::-webkit-scrollbar { width: 6px; height: 6px; }
    ::-webkit-scrollbar-track { background: transparent; }
    ::-webkit-scrollbar-thumb { background: var(--border-default); border-radius: 9999px; }

    .sidebar-link {
      display: flex; align-items: center; gap: 10px;
      padding: 7px 16px; border-radius: 6px;
      color: var(--text-soft); font-size: 13px; font-weight: 500;
      text-decoration: none; transition: all 0.15s;
    }
    .sidebar-link:hover { background: var(--bg-hover); color: var(--text-default); }
    .sidebar-link.active { background: var(--bg-active); color: var(--text-default); }

    .btn-primary { background: var(--color-primary); color: #fff; font-weight: 500; text-transform: capitalize; border-radius: 6px; padding: 0 16px; height: 30px; display: inline-flex; align-items: center; gap: 6px; transition: all 0.15s; cursor: pointer; border: none; font-family: inherit; font-size: 13px; }
    .btn-primary:hover { filter: brightness(1.15); }
    .btn-lg { height: 38px; padding: 0 24px; font-size: 15px; }
    .btn-success { background: var(--color-success); color: #fff; font-weight: 500; text-transform: capitalize; border-radius: 6px; padding: 0 16px; height: 30px; display: inline-flex; align-items: center; gap: 6px; transition: all 0.15s; cursor: pointer; border: none; font-family: inherit; font-size: 13px; }
    .btn-success:hover { filter: brightness(1.15); }
    .btn-warning { background: var(--color-warning); color: #fff; font-weight: 500; text-transform: capitalize; border-radius: 6px; padding: 0 16px; height: 30px; display: inline-flex; align-items: center; gap: 6px; transition: all 0.15s; cursor: pointer; border: none; font-family: inherit; font-size: 13px; }
    .btn-warning:hover { filter: brightness(1.15); }
    .btn-ghost { background: transparent; color: var(--text-default); font-weight: 500; border-radius: 6px; padding: 0 12px; height: 30px; display: inline-flex; align-items: center; gap: 6px; border: 1px solid var(--border-default); transition: all 0.15s; cursor: pointer; font-family: inherit; font-size: 13px; }
    .btn-ghost:hover { background: var(--bg-hover); }

    .input-field { background: var(--bg-input); border: 1px solid var(--border-default); color: var(--text-default); border-radius: 6px; padding: 6px 12px; font-size: 13px; font-family: 'Inter', sans-serif; outline: none; transition: border-color 0.15s; width: 100%; }
    .input-field:focus { border-color: var(--color-primary); }
    .input-field-lg { padding: 10px 16px; font-size: 15px; }

    .badge-success { display: inline-flex; align-items: center; gap: 4px; padding: 2px 10px; border-radius: 9999px; font-size: 12px; font-weight: 500; color: hsl(151, 61%, 43%); background: hsla(151, 61%, 43%, 0.1); border: 1px solid hsla(151, 61%, 43%, 0.2); }
    .badge-warning { display: inline-flex; align-items: center; gap: 4px; padding: 2px 10px; border-radius: 9999px; font-size: 12px; font-weight: 500; color: hsl(0, 88%, 66%); background: hsla(0, 88%, 66%, 0.1); border: 1px solid hsla(0, 88%, 66%, 0.2); }
    .badge-pending { display: inline-flex; align-items: center; gap: 4px; padding: 2px 10px; border-radius: 9999px; font-size: 12px; font-weight: 500; color: hsl(44, 88%, 66%); background: hsla(44, 88%, 66%, 0.1); border: 1px solid hsla(44, 88%, 66%, 0.2); }
    .badge-info { display: inline-flex; align-items: center; gap: 4px; padding: 2px 10px; border-radius: 9999px; font-size: 12px; font-weight: 500; color: #45A4E4; background: rgba(69, 164, 228, 0.1); border: 1px solid rgba(69, 164, 228, 0.2); }

    .card { background: var(--bg-content); border: 1px solid var(--border-default); border-radius: 6px; }

    .data-table { width: 100%; border-collapse: collapse; }
    .data-table thead th {
      background: var(--bg-sidebar);
      padding: 8px 12px; text-align: left;
      font-size: 11px; font-weight: 600; text-transform: uppercase;
      letter-spacing: 0.05em; color: var(--text-soft);
      border-bottom: 1px solid var(--border-default);
    }
    .data-table tbody tr:hover { background: var(--bg-row-hover); }
    .data-table td {
      padding: 8px 12px; font-size: 13px;
      border-bottom: 1px solid var(--border-soft);
    }

    .search-result-item {
      display: flex; align-items: center; justify-content: space-between;
      padding: 12px 16px; border-radius: 6px;
      border: 1px solid var(--border-soft);
      margin-bottom: 6px; cursor: pointer; transition: all 0.12s;
    }
    .search-result-item:hover { background: var(--bg-hover); border-color: var(--border-default); }

    .entitlement-row {
      display: flex; align-items: center; gap: 10px;
      padding: 8px 12px; border-radius: 6px;
      border-bottom: 1px solid var(--border-soft);
    }
    .entitlement-row:last-child { border-bottom: none; }

    .credential-pill {
      display: inline-flex; align-items: center; gap: 6px;
      padding: 4px 12px; border-radius: 6px;
      background: var(--bg-input); border: 1px solid var(--border-default);
      font-size: 12px; font-family: monospace;
    }

    .badge-preview {
      background: white;
      border-radius: 12px;
      padding: 24px;
      color: #1a1a2e;
      width: 300px;
      margin: 0 auto;
      position: relative;
      overflow: hidden;
    }
    .badge-preview .access-strip {
      position: absolute; top: 0; left: 0; right: 0; height: 6px;
    }
    .badge-preview .qr-placeholder {
      width: 100px; height: 100px;
      background: #f0f0f0; border: 2px solid #ddd;
      border-radius: 8px; margin: 0 auto;
      display: flex; align-items: center; justify-content: center;
      font-size: 11px; color: #999;
    }

    .help-overlay {
      position: fixed; inset: 0; z-index: 100;
      background: rgba(0,0,0,0.6); display: flex; align-items: center; justify-content: center;
    }
    .help-card {
      background: var(--bg-sidebar); border: 1px solid var(--border-default);
      border-radius: 6px; padding: 32px; max-width: 620px; width: 90%;
    }

    .checkbox-item {
      display: flex; align-items: center; gap: 8px;
      padding: 4px 0; font-size: 13px;
    }
    .checkbox-item input[type="checkbox"] {
      accent-color: var(--color-primary);
      width: 16px; height: 16px;
    }

    @keyframes printing {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }
    .printing-anim { animation: printing 1s ease-in-out infinite; }
  </style>
</head>
<body class="min-h-screen" x-data="accreditationApp()">

  <!-- Navbar -->
  <nav class="fixed top-0 left-0 right-0 z-50 flex items-center justify-between px-4" style="height: 48px; background: var(--bg-sidebar); border-bottom: 1px solid var(--border-default);">
    <div class="flex items-center gap-4">
      <img src="https://crescat.io/assets/logo/logo-white.svg" alt="Crescat" style="height: 12px;">
      <span style="color: var(--text-soft);">|</span>
      <span style="color: var(--text-soft); font-size: 13px;">Midgard Festival 2026</span>
    </div>
    <div class="flex items-center gap-3">
      <button @click="showHelp = true" class="btn-ghost" style="height: 26px; padding: 0 8px; font-size: 12px;">&#10067; Help</button>
      <span style="color: var(--text-soft); font-size: 13px;">Accreditation Desk</span>
      <div class="w-8 h-8 rounded-full flex items-center justify-center text-xs font-semibold" style="background: var(--color-primary); color: #fff;">MS</div>
    </div>
  </nav>

  <!-- SIDEBAR -->
  <aside class="fixed top-12 left-0 bottom-0 overflow-y-auto py-4 px-3" style="width:232px; background:var(--bg-sidebar); border-right:1px solid var(--border-default);">
    <div class="mb-4 px-3">
      <p class="text-xs font-semibold uppercase tracking-wider mb-2" style="color:var(--text-soft);">Main</p>
    </div>
    <nav class="flex flex-col gap-1">
      <a href="01-dashboard.html" class="sidebar-link">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="7" height="7" rx="1"/><rect x="14" y="3" width="7" height="7" rx="1"/><rect x="3" y="14" width="7" height="7" rx="1"/><rect x="14" y="14" width="7" height="7" rx="1"/></svg>
        Dashboard
      </a>
      <a href="02-participants.html" class="sidebar-link">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 00-3-3.87"/><path d="M16 3.13a4 4 0 010 7.75"/></svg>
        Participants
      </a>
      <a href="04-entitlement-items.html" class="sidebar-link">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="2" y="7" width="20" height="14" rx="2"/><path d="M16 7V5a2 2 0 00-2-2h-4a2 2 0 00-2 2v2"/></svg>
        Entitlement Items
      </a>
      <a href="05-rules.html" class="sidebar-link">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/></svg>
        Rules Engine
      </a>
      <a href="06-zones.html" class="sidebar-link">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="1 6 1 22 8 18 16 22 23 18 23 2 16 6 8 2 1 6"/></svg>
        Zones
      </a>
      <a href="07-checkpoints.html" class="sidebar-link">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 22s-8-4.5-8-11.8A8 8 0 0112 2a8 8 0 018 8.2c0 7.3-8 11.8-8 11.8z"/><circle cx="12" cy="10" r="3"/></svg>
        Checkpoints
      </a>
      <a href="08-allocations.html" class="sidebar-link">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 16V8a2 2 0 00-1-1.73l-7-4a2 2 0 00-2 0l-7 4A2 2 0 003 8v8a2 2 0 001 1.73l7 4a2 2 0 002 0l7-4A2 2 0 0021 16z"/></svg>
        Allocations
      </a>
      <a href="09-credentials.html" class="sidebar-link">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="4" width="18" height="16" rx="2"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
        Credentials
      </a>
      <a href="10-scan-log.html" class="sidebar-link">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/></svg>
        Scan Log
      </a>
      <a href="13-schedules.html" class="sidebar-link">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
        Schedules
      </a>
      <a href="14-equipment.html" class="sidebar-link">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14.7 6.3a1 1 0 000 1.4l1.6 1.6a1 1 0 001.4 0l3.77-3.77a6 6 0 01-7.94 7.94l-6.91 6.91a2.12 2.12 0 01-3-3l6.91-6.91a6 6 0 017.94-7.94l-3.76 3.76z"/></svg>
        Equipment
      </a>
      <a href="catering.html" class="sidebar-link">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 8h1a4 4 0 010 8h-1"/><path d="M2 8h16v9a4 4 0 01-4 4H6a4 4 0 01-4-4V8z"/><line x1="6" y1="1" x2="6" y2="4"/><line x1="10" y1="1" x2="10" y2="4"/><line x1="14" y1="1" x2="14" y2="4"/></svg>
        Catering
      </a>
      <a href="lost-found.html" class="sidebar-link">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
        Lost &amp; Found
      </a>
      <a href="crowd-flow.html" class="sidebar-link">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 00-3-3.87"/><path d="M16 3.13a4 4 0 010 7.75"/><polyline points="22 4 22 10 16 10"/></svg>
        Crowd Flow
      </a>

      <div class="my-3 mx-3" style="border-top:1px solid var(--border-soft);"></div>
      <p class="text-xs font-semibold uppercase tracking-wider mb-2 px-3" style="color:var(--text-soft);">On-Site</p>

      <a href="11-scanner.html" class="sidebar-link">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 7V4h3"/><path d="M20 7V4h-3"/><path d="M4 17v3h3"/><path d="M20 17v3h-3"/><line x1="4" y1="12" x2="20" y2="12"/></svg>
        Scanner
      </a>
      <a href="12-accreditation-office.html" class="sidebar-link active">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>
        Accreditation Office
      </a>

      <div class="my-3 mx-3" style="border-top:1px solid var(--border-soft);"></div>
      <p class="text-xs font-semibold uppercase tracking-wider mb-2 px-3" style="color:var(--text-soft);">Self-Service</p>

      <a href="volunteer-onboarding.html" class="sidebar-link">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M16 21v-2a4 4 0 00-4-4H6a4 4 0 00-4 4v2"/><circle cx="9" cy="7" r="4"/><line x1="19" y1="8" x2="19" y2="14"/><line x1="22" y1="11" x2="16" y2="11"/></svg>
        Volunteer Portal
      </a>
      <a href="15-portal.html" class="sidebar-link">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="2" y="3" width="20" height="14" rx="2"/><path d="M8 21h8"/><path d="M12 17v4"/></svg>
        Self-Service Portal
      </a>
    </nav>
  </aside>

  <!-- Main Content -->
  <main class="pt-[48px]" style="margin-left: 232px;">
    <div class="p-6">

      <!-- Page Header -->
      <div class="flex items-center justify-between mb-6">
        <div>
          <h1 class="text-xl font-semibold text-white mb-1">Accreditation Office</h1>
          <p style="color: var(--text-soft); font-size: 13px;">Walk-in registration, badge printing, and credential management</p>
        </div>
        <div class="flex items-center gap-3">
          <span style="color: var(--text-soft); font-size: 13px;">47 unprinted badges</span>
          <button @click="showHelp = true" class="btn-ghost">&#10067; Help</button>
        </div>
      </div>

      <!-- Split Panel Layout -->
      <div class="grid grid-cols-2 gap-6" style="min-height: calc(100vh - 140px);">

        <!-- LEFT PANEL: Participant Lookup & Registration -->
        <div class="flex flex-col gap-4">

          <!-- Search Section -->
          <div class="card p-4">
            <div class="flex items-center gap-3 mb-4">
              <input type="text" class="input-field input-field-lg" placeholder="Search by name, email, or scan credential..."
                     x-model="searchQuery" @input="performSearch()" @keyup.enter="performSearch()">
              <button @click="performSearch()" class="btn-primary btn-lg">Search</button>
            </div>

            <!-- Search Results -->
            <div x-show="searchResults.length > 0 && !selectedParticipant">
              <div style="font-size: 11px; color: var(--text-soft); text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 8px;">
                <span x-text="searchResults.length"></span> results for "<span x-text="searchQuery"></span>"
              </div>
              <template x-for="result in searchResults" :key="result.id">
                <div class="search-result-item" @click="selectParticipant(result)">
                  <div class="flex items-center gap-3">
                    <div class="w-9 h-9 rounded-full flex items-center justify-center text-xs font-semibold" style="background: var(--color-primary); color: #fff;" x-text="result.initials"></div>
                    <div>
                      <div class="text-white font-medium text-sm" x-text="result.name"></div>
                      <div style="color: var(--text-soft); font-size: 12px;" x-text="result.type + ' / ' + result.affiliation + ' / ' + result.role"></div>
                    </div>
                  </div>
                  <div class="flex items-center gap-3">
                    <span class="badge-info" x-text="result.entitlementCount + ' entitlements'"></span>
                    <button class="btn-primary" style="height: 26px; font-size: 12px;" @click.stop="selectParticipant(result)">Select</button>
                  </div>
                </div>
              </template>
            </div>

            <div x-show="searchQuery && searchResults.length === 0 && !selectedParticipant" style="color: var(--text-soft); font-size: 13px; text-align: center; padding: 20px;">
              No participants found. <a href="#" @click.prevent="showWalkIn = true" style="color: var(--text-link);">Register walk-in?</a>
            </div>
          </div>

          <!-- Selected Participant Details -->
          <div x-show="selectedParticipant" x-transition class="card p-4">
            <div class="flex items-center justify-between mb-4">
              <div class="flex items-center gap-4">
                <div class="w-14 h-14 rounded-full flex items-center justify-center text-lg font-bold" style="background: var(--color-primary); color: #fff;" x-text="selectedParticipant?.initials"></div>
                <div>
                  <div class="text-white font-semibold text-lg" x-text="selectedParticipant?.name"></div>
                  <div style="color: var(--text-soft); font-size: 13px;" x-text="selectedParticipant?.type + ' / ' + selectedParticipant?.affiliation"></div>
                  <div style="color: var(--text-soft); font-size: 12px;" x-text="'Role: ' + selectedParticipant?.role"></div>
                </div>
              </div>
              <button @click="selectedParticipant = null; searchQuery = ''" class="btn-ghost" style="height: 26px; font-size: 12px;">&#10005; Clear</button>
            </div>

            <!-- Entitlements Summary -->
            <div class="mb-4">
              <div style="font-size: 11px; color: var(--text-soft); text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 8px;">Entitlements</div>
              <div style="background: var(--bg-sidebar); border: 1px solid var(--border-soft); border-radius: 6px; overflow: hidden;">
                <template x-for="(ent, idx) in selectedParticipant?.entitlements || []" :key="idx">
                  <div class="entitlement-row">
                    <span :style="ent.status === 'active' ? 'color: var(--color-success);' : ent.status === 'collected' ? 'color: var(--color-highlight);' : 'color: var(--text-soft);'"
                          x-text="ent.status === 'active' ? '✅' : ent.status === 'collected' ? '☑' : '☐'"></span>
                    <div class="flex-1">
                      <span class="text-white text-sm" x-text="ent.name"></span>
                      <span style="color: var(--text-soft); font-size: 12px; margin-left: 8px;" x-text="ent.detail"></span>
                    </div>
                    <span :class="ent.status === 'active' ? 'badge-success' : ent.status === 'collected' ? 'badge-info' : 'badge-pending'" x-text="ent.statusLabel" style="font-size: 11px;"></span>
                  </div>
                </template>
              </div>
            </div>

            <!-- Credentials -->
            <div class="mb-4">
              <div style="font-size: 11px; color: var(--text-soft); text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 8px;">Credentials</div>
              <div class="flex flex-wrap gap-2">
                <template x-for="(cred, idx) in selectedParticipant?.credentials || []" :key="idx">
                  <div class="credential-pill">
                    <span style="color: var(--text-soft);" x-text="cred.type + ':'"></span>
                    <span class="text-white" x-text="cred.id"></span>
                    <span class="badge-success" style="font-size: 10px;" x-text="cred.status"></span>
                  </div>
                </template>
              </div>
            </div>

            <!-- Quick Actions -->
            <div class="flex flex-wrap gap-2">
              <button class="btn-primary" style="height: 28px; font-size: 12px;">+ Add Entitlement</button>
              <button class="btn-primary" style="height: 28px; font-size: 12px;">+ Issue Credential</button>
              <button class="btn-success" style="height: 28px; font-size: 12px;" @click="printBadge()">&#9113; Print Badge</button>
              <button class="btn-warning" style="height: 28px; font-size: 12px;">&#9888; Suspend All Credentials</button>
            </div>
          </div>

          <!-- Walk-in Registration -->
          <div class="card" :class="showWalkIn ? '' : 'cursor-pointer'" @click="!showWalkIn && (showWalkIn = true)">
            <div class="flex items-center justify-between p-4" @click="showWalkIn = !showWalkIn" style="cursor: pointer;">
              <div class="flex items-center gap-2">
                <span style="font-size: 16px;" x-text="showWalkIn ? '▼' : '▶'"></span>
                <span class="text-white font-semibold">Register Walk-In Participant</span>
              </div>
              <span class="badge-info" style="font-size: 11px;">Walk-in</span>
            </div>

            <div x-show="showWalkIn" x-transition class="px-4 pb-4">
              <div class="grid grid-cols-2 gap-3 mb-3">
                <div>
                  <label style="font-size: 11px; color: var(--text-soft); display: block; margin-bottom: 4px;">First Name *</label>
                  <input type="text" class="input-field" placeholder="First name" x-model="walkInForm.firstName">
                </div>
                <div>
                  <label style="font-size: 11px; color: var(--text-soft); display: block; margin-bottom: 4px;">Last Name *</label>
                  <input type="text" class="input-field" placeholder="Last name" x-model="walkInForm.lastName">
                </div>
              </div>
              <div class="grid grid-cols-2 gap-3 mb-3">
                <div>
                  <label style="font-size: 11px; color: var(--text-soft); display: block; margin-bottom: 4px;">Email *</label>
                  <input type="email" class="input-field" placeholder="email@example.com" x-model="walkInForm.email">
                </div>
                <div>
                  <label style="font-size: 11px; color: var(--text-soft); display: block; margin-bottom: 4px;">Phone</label>
                  <input type="tel" class="input-field" placeholder="+47 xxx xx xxx" x-model="walkInForm.phone">
                </div>
              </div>
              <div class="grid grid-cols-3 gap-3 mb-3">
                <div>
                  <label style="font-size: 11px; color: var(--text-soft); display: block; margin-bottom: 4px;">Type *</label>
                  <select class="input-field" x-model="walkInForm.type">
                    <option value="">Select type...</option>
                    <option value="Crew">Crew</option>
                    <option value="Guest">Guest</option>
                    <option value="Media">Media</option>
                    <option value="Vendor">Vendor</option>
                    <option value="Volunteer">Volunteer</option>
                  </select>
                </div>
                <div>
                  <label style="font-size: 11px; color: var(--text-soft); display: block; margin-bottom: 4px;">Affiliation</label>
                  <input type="text" class="input-field" placeholder="e.g. Sound Department" x-model="walkInForm.affiliation">
                </div>
                <div>
                  <label style="font-size: 11px; color: var(--text-soft); display: block; margin-bottom: 4px;">Role</label>
                  <input type="text" class="input-field" placeholder="e.g. Stage Manager" x-model="walkInForm.role">
                </div>
              </div>

              <!-- Entitlement Items Selection -->
              <div class="mb-4">
                <label style="font-size: 11px; color: var(--text-soft); display: block; margin-bottom: 8px; text-transform: uppercase; letter-spacing: 0.05em;">Entitlement Items</label>
                <div style="background: var(--bg-sidebar); border: 1px solid var(--border-soft); border-radius: 6px; padding: 12px;">
                  <div class="mb-3">
                    <div style="font-size: 11px; color: var(--text-soft); font-weight: 600; margin-bottom: 6px;">Access Passes</div>
                    <div class="grid grid-cols-2 gap-1">
                      <label class="checkbox-item"><input type="checkbox" x-model="walkInForm.items" value="general-access"> General Access</label>
                      <label class="checkbox-item"><input type="checkbox" x-model="walkInForm.items" value="backstage-pass"> Backstage Pass</label>
                      <label class="checkbox-item"><input type="checkbox" x-model="walkInForm.items" value="aaa-access"> AAA-Access</label>
                      <label class="checkbox-item"><input type="checkbox" x-model="walkInForm.items" value="vip-pass"> VIP Pass</label>
                      <label class="checkbox-item"><input type="checkbox" x-model="walkInForm.items" value="parking-pass"> Parking Pass</label>
                    </div>
                  </div>
                  <div class="mb-3">
                    <div style="font-size: 11px; color: var(--text-soft); font-weight: 600; margin-bottom: 6px;">Meals &amp; Refreshments</div>
                    <div class="grid grid-cols-2 gap-1">
                      <label class="checkbox-item"><input type="checkbox" x-model="walkInForm.items" value="lunch-voucher"> Lunch Voucher (3/day)</label>
                      <label class="checkbox-item"><input type="checkbox" x-model="walkInForm.items" value="dinner-voucher"> Dinner Voucher (1/day)</label>
                      <label class="checkbox-item"><input type="checkbox" x-model="walkInForm.items" value="drink-token"> Drink Token (5/day)</label>
                      <label class="checkbox-item"><input type="checkbox" x-model="walkInForm.items" value="breakfast-voucher"> Breakfast Voucher (1/day)</label>
                    </div>
                  </div>
                  <div>
                    <div style="font-size: 11px; color: var(--text-soft); font-weight: 600; margin-bottom: 6px;">Equipment &amp; Merchandise</div>
                    <div class="grid grid-cols-2 gap-1">
                      <label class="checkbox-item"><input type="checkbox" x-model="walkInForm.items" value="two-way-radio"> Two-Way Radio</label>
                      <label class="checkbox-item"><input type="checkbox" x-model="walkInForm.items" value="crew-tshirt"> Crew T-Shirt</label>
                      <label class="checkbox-item"><input type="checkbox" x-model="walkInForm.items" value="volunteer-tshirt"> Volunteer T-Shirt</label>
                      <label class="checkbox-item"><input type="checkbox" x-model="walkInForm.items" value="festival-lanyard"> Festival Lanyard</label>
                    </div>
                  </div>
                </div>
              </div>

              <div class="flex gap-3">
                <button class="btn-success btn-lg flex-1" @click="registerWalkIn()">&#10003; Register &amp; Print Badge</button>
                <button class="btn-ghost" @click="showWalkIn = false" style="height: 38px;">Cancel</button>
              </div>
            </div>
          </div>

        </div>

        <!-- RIGHT PANEL: Badge Printing & Credential Queue -->
        <div class="flex flex-col gap-4">

          <!-- Badge Preview -->
          <div class="card p-4">
            <div style="font-size: 11px; color: var(--text-soft); text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 16px;">Badge Preview</div>

            <div class="badge-preview" style="margin-bottom: 20px;">
              <div class="access-strip" :style="'background: ' + badgeAccessColor + ';'"></div>

              <!-- Festival Logo -->
              <div class="text-center mb-3" style="padding-top: 8px;">
                <div style="font-size: 14px; font-weight: 700; color: #1a1a2e; letter-spacing: 0.1em; text-transform: uppercase;">Midgard Festival</div>
                <div style="font-size: 10px; color: #666;">2026</div>
              </div>

              <!-- Access Level Strip -->
              <div class="text-center mb-3">
                <span style="display: inline-block; padding: 3px 16px; border-radius: 4px; font-size: 11px; font-weight: 700; text-transform: uppercase; letter-spacing: 0.08em; color: white;"
                      :style="'background: ' + badgeAccessColor + ';'"
                      x-text="badgeData.accessLevel"></span>
              </div>

              <!-- Name -->
              <div class="text-center mb-2">
                <div style="font-size: 22px; font-weight: 700; color: #1a1a2e; letter-spacing: 0.02em;" x-text="badgeData.name"></div>
              </div>

              <!-- Role & Affiliation -->
              <div class="text-center mb-4">
                <div style="font-size: 13px; font-weight: 600; color: #444;" x-text="badgeData.role"></div>
                <div style="font-size: 12px; color: #666;" x-text="badgeData.affiliation"></div>
              </div>

              <!-- QR Code Placeholder -->
              <div class="qr-placeholder mb-3">
                <div>
                  <div style="font-size: 24px; margin-bottom: 2px;">&#9641;&#9641;&#9641;</div>
                  <div style="font-size: 24px; margin-bottom: 2px;">&#9641;&#9641;&#9641;</div>
                  <div style="font-size: 24px;">&#9641;&#9641;&#9641;</div>
                </div>
              </div>

              <!-- Details -->
              <div class="text-center" style="font-size: 11px; color: #888;">
                <div x-text="badgeData.dates"></div>
                <div style="font-family: monospace; font-size: 10px; margin-top: 2px;" x-text="badgeData.badgeNumber"></div>
              </div>
            </div>

            <!-- Print Controls -->
            <div class="mb-3">
              <label style="font-size: 11px; color: var(--text-soft); display: block; margin-bottom: 4px;">Badge Template</label>
              <select class="input-field" x-model="selectedTemplate">
                <option value="AAA Template">AAA Template</option>
                <option value="General Template">General Template</option>
                <option value="Media Template">Media Template</option>
                <option value="VIP Template">VIP Template</option>
                <option value="Volunteer Template">Volunteer Template</option>
              </select>
            </div>

            <div class="flex flex-col gap-2">
              <button class="btn-success btn-lg w-full justify-center" @click="printBadge()">
                &#9113; Print Badge
              </button>
              <div class="grid grid-cols-2 gap-2">
                <button class="btn-ghost w-full justify-center" style="height: 34px;">&#9113; Print QR Only</button>
                <button class="btn-primary w-full justify-center" style="height: 34px;">&#9993; Send Digital Credential</button>
              </div>
            </div>
          </div>

          <!-- Print Queue -->
          <div class="card">
            <div class="flex items-center justify-between p-4" style="border-bottom: 1px solid var(--border-soft);">
              <div style="font-size: 11px; color: var(--text-soft); text-transform: uppercase; letter-spacing: 0.05em;">Print Queue</div>
              <button class="btn-ghost" style="height: 24px; font-size: 11px;" @click="clearPrintQueue()">Clear Queue</button>
            </div>
            <table class="data-table">
              <thead>
                <tr>
                  <th style="width: 30px;">#</th>
                  <th>Participant</th>
                  <th>Template</th>
                  <th style="width: 90px;">Status</th>
                </tr>
              </thead>
              <tbody>
                <template x-for="(item, idx) in printQueue" :key="item.id">
                  <tr>
                    <td style="font-size: 12px; color: var(--text-soft);" x-text="idx + 1"></td>
                    <td>
                      <span class="text-white text-sm" x-text="item.name"></span>
                    </td>
                    <td style="font-size: 12px; color: var(--text-soft);" x-text="item.template"></td>
                    <td>
                      <span x-show="item.status === 'printing'" class="badge-pending printing-anim" style="font-size: 11px;">Printing...</span>
                      <span x-show="item.status === 'queued'" class="badge-info" style="font-size: 11px;">Queued</span>
                      <span x-show="item.status === 'done'" class="badge-success" style="font-size: 11px;">Done</span>
                      <span x-show="item.status === 'error'" class="badge-warning" style="font-size: 11px;">Error</span>
                    </td>
                  </tr>
                </template>
                <tr x-show="printQueue.length === 0">
                  <td colspan="4" style="text-align: center; color: var(--text-soft); padding: 20px; font-size: 13px;">
                    No items in print queue
                  </td>
                </tr>
              </tbody>
            </table>
          </div>

          <!-- Batch Print -->
          <div class="card p-4">
            <div class="flex items-center justify-between mb-3">
              <div style="font-size: 11px; color: var(--text-soft); text-transform: uppercase; letter-spacing: 0.05em;">Batch Print</div>
            </div>
            <div class="flex items-center gap-3 mb-3">
              <button class="btn-primary" @click="alert('Generating batch for 47 unprinted participants...')">
                &#9113; Print All Unprinted
                <span class="badge-pending" style="font-size: 10px; margin-left: 4px;">47</span>
              </button>
            </div>
            <div class="flex items-center gap-3">
              <select class="input-field" style="font-size: 12px; flex: 1;">
                <option value="">Filter by section...</option>
                <option value="crew">Crew</option>
                <option value="volunteers">Volunteers</option>
                <option value="media">Media</option>
                <option value="vendors">Vendors</option>
                <option value="guests">Guests</option>
              </select>
              <select class="input-field" style="font-size: 12px; flex: 1;">
                <option value="">Filter by entitlement...</option>
                <option value="aaa">AAA-Access</option>
                <option value="backstage">Backstage Pass</option>
                <option value="vip">VIP Pass</option>
                <option value="general">General Access</option>
              </select>
              <button class="btn-ghost" style="height: 30px; font-size: 12px; white-space: nowrap;">Generate Print Batch</button>
            </div>
          </div>

        </div>
      </div>

    </div>
  </main>

  <!-- Help Overlay -->
  <div x-show="showHelp" x-transition class="help-overlay" @click.self="showHelp = false">
    <div class="help-card">
      <div class="flex items-center justify-between mb-4">
        <h2 class="text-lg font-semibold text-white">&#10067; Accreditation Office Help</h2>
        <button @click="showHelp = false" style="color: var(--text-soft); font-size: 20px; cursor: pointer; background: none; border: none;">&#10005;</button>
      </div>
      <div style="color: var(--text-default); font-size: 13px; line-height: 1.7;">
        <p class="mb-3">The <strong>Accreditation Office</strong> is the on-site desk where staff handle walk-in registrations, badge printing, and credential management.</p>
        <p class="mb-3">The <strong>left panel</strong> searches for existing participants or registers new ones. The <strong>right panel</strong> previews and prints badges.</p>
        <p class="mb-3">This combines the Participant Onboarding workflow with credential issuance. Walk-in registrants can be immediately assigned entitlements and printed a badge.</p>
        <p class="mb-3">This replaces the traditional "accreditation desk" with a unified entitlement-aware workflow. When a participant is selected, you can see all their entitlements, credentials, and quickly perform actions like adding entitlements or printing badges.</p>
        <p><strong>Batch Print:</strong> Use the batch print section to print badges for all unprinted participants, filtered by section or entitlement type. This is useful for pre-printing badges before the event begins.</p>
      </div>
      <div class="mt-6 flex justify-end">
        <button @click="showHelp = false" class="btn-primary">Got it</button>
      </div>
    </div>
  </div>

  <script>
    function accreditationApp() {
      return {
        showHelp: false,
        showWalkIn: false,
        searchQuery: '',
        searchResults: [],
        selectedParticipant: null,
        selectedTemplate: 'AAA Template',

        badgeData: {
          name: 'KARI NORDMANN',
          role: 'Stage Manager',
          affiliation: 'Sound Department',
          accessLevel: 'AAA',
          dates: 'Jul 14-17, 2026',
          badgeNumber: 'MF2026-0842'
        },

        get badgeAccessColor() {
          const colors = {
            'AAA': '#D4A843',
            'BACKSTAGE': '#7B68EE',
            'VIP': '#E06B75',
            'GENERAL': '#45A4E4',
            'MEDIA': '#E8A838',
            'VOLUNTEER': '#37B679'
          };
          return colors[this.badgeData.accessLevel] || '#45A4E4';
        },

        walkInForm: {
          firstName: '',
          lastName: '',
          email: '',
          phone: '',
          type: '',
          affiliation: '',
          role: '',
          items: []
        },

        printQueue: [
          { id: 1, name: 'Anna Svensson', template: 'General', status: 'printing' },
          { id: 2, name: 'Thomas Lund', template: 'AAA', status: 'queued' },
          { id: 3, name: 'Ingrid Berg', template: 'Media', status: 'queued' }
        ],

        allParticipants: [
          {
            id: 1, name: 'Kari Nordmann', initials: 'KN', type: 'Crew', affiliation: 'Sound Department', role: 'Stage Manager',
            entitlementCount: 6,
            entitlements: [
              { name: 'AAA-Access Pass', detail: '(active)', status: 'active', statusLabel: 'Active' },
              { name: 'Parking Pass', detail: '(active)', status: 'active', statusLabel: 'Active' },
              { name: 'Lunch Voucher', detail: '3/day, 1 used today', status: 'active', statusLabel: '2 left' },
              { name: 'Dinner Voucher', detail: '1/day, 0 used', status: 'active', statusLabel: 'Available' },
              { name: 'Two-Way Radio', detail: 'Radio #247', status: 'collected', statusLabel: 'Collected' },
              { name: 'Volunteer T-Shirt M', detail: '', status: 'collected', statusLabel: 'Collected' }
            ],
            credentials: [
              { type: 'QR', id: '3f7a...b2c1', status: 'active' },
              { type: 'Badge', id: '8d2e...f4a5', status: 'active' }
            ],
            accessLevel: 'AAA', badgeNumber: 'MF2026-0842'
          },
          {
            id: 2, name: 'Kari Haugen', initials: 'KH', type: 'Volunteer', affiliation: 'Volunteer Team', role: 'Stage Assistant',
            entitlementCount: 3,
            entitlements: [
              { name: 'General Access', detail: '(active)', status: 'active', statusLabel: 'Active' },
              { name: 'Lunch Voucher', detail: '2/day, 0 used today', status: 'active', statusLabel: 'Available' },
              { name: 'Volunteer T-Shirt L', detail: '', status: 'pending', statusLabel: 'Not collected' }
            ],
            credentials: [
              { type: 'QR', id: '5e9c...d7a2', status: 'active' }
            ],
            accessLevel: 'GENERAL', badgeNumber: 'MF2026-0156'
          },
          {
            id: 3, name: 'Erik Hansen', initials: 'EH', type: 'Crew', affiliation: 'Lighting Department', role: 'Lighting Tech',
            entitlementCount: 5,
            entitlements: [
              { name: 'AAA-Access Pass', detail: '(active)', status: 'active', statusLabel: 'Active' },
              { name: 'Backstage Pass', detail: '(active)', status: 'active', statusLabel: 'Active' },
              { name: 'Lunch Voucher', detail: '3/day, 2 used today', status: 'active', statusLabel: '1 left' },
              { name: 'Dinner Voucher', detail: '1/day, 0 used', status: 'active', statusLabel: 'Available' },
              { name: 'Two-Way Radio', detail: 'Radio #312', status: 'collected', statusLabel: 'Collected' }
            ],
            credentials: [
              { type: 'QR', id: '9b4f...e1c3', status: 'active' },
              { type: 'Badge', id: 'a2d7...b8e4', status: 'active' }
            ],
            accessLevel: 'AAA', badgeNumber: 'MF2026-0233'
          },
          {
            id: 4, name: 'Sofia Andersen', initials: 'SA', type: 'Guest', affiliation: 'VIP Guest', role: 'Artist Liaison',
            entitlementCount: 4,
            entitlements: [
              { name: 'VIP Pass', detail: '(active)', status: 'active', statusLabel: 'Active' },
              { name: 'Parking Pass', detail: '(active)', status: 'active', statusLabel: 'Active' },
              { name: 'Dinner Voucher', detail: '1/day, 0 used', status: 'active', statusLabel: 'Available' },
              { name: 'Drink Token', detail: '5/day, 1 used today', status: 'active', statusLabel: '4 left' }
            ],
            credentials: [
              { type: 'QR', id: 'c6e2...a9d5', status: 'active' }
            ],
            accessLevel: 'VIP', badgeNumber: 'MF2026-0478'
          },
          {
            id: 5, name: 'Lars Johansen', initials: 'LJ', type: 'Volunteer', affiliation: 'Volunteer Team', role: 'Gate Steward',
            entitlementCount: 3,
            entitlements: [
              { name: 'General Access', detail: '(active)', status: 'active', statusLabel: 'Active' },
              { name: 'Lunch Voucher', detail: '3/day, 3 used today', status: 'active', statusLabel: 'Limit reached' },
              { name: 'Volunteer T-Shirt M', detail: '', status: 'collected', statusLabel: 'Collected' }
            ],
            credentials: [
              { type: 'QR', id: 'e5f6...g7h8', status: 'active' }
            ],
            accessLevel: 'GENERAL', badgeNumber: 'MF2026-0567'
          },
          {
            id: 6, name: 'Thomas Lund', initials: 'TL', type: 'Crew', affiliation: 'Production', role: 'Production Manager',
            entitlementCount: 5,
            entitlements: [
              { name: 'AAA-Access Pass', detail: '(active)', status: 'active', statusLabel: 'Active' },
              { name: 'Backstage Pass', detail: '(active)', status: 'active', statusLabel: 'Active' },
              { name: 'Parking Pass', detail: '(active)', status: 'active', statusLabel: 'Active' },
              { name: 'Lunch Voucher', detail: '3/day, 0 used today', status: 'active', statusLabel: 'Available' },
              { name: 'Two-Way Radio', detail: 'Radio #108', status: 'collected', statusLabel: 'Collected' }
            ],
            credentials: [
              { type: 'QR', id: 'q7r8...s9t0', status: 'active' },
              { type: 'Badge', id: 'f3g4...h5i6', status: 'active' }
            ],
            accessLevel: 'AAA', badgeNumber: 'MF2026-0345'
          },
          {
            id: 7, name: 'Ingrid Berg', initials: 'IB', type: 'Media', affiliation: 'NRK', role: 'Journalist',
            entitlementCount: 4,
            entitlements: [
              { name: 'Media Pass', detail: '(active)', status: 'active', statusLabel: 'Active' },
              { name: 'Backstage Pass', detail: '(active)', status: 'active', statusLabel: 'Active' },
              { name: 'Lunch Voucher', detail: '2/day, 0 used today', status: 'active', statusLabel: 'Available' },
              { name: 'Parking Pass', detail: '(active)', status: 'active', statusLabel: 'Active' }
            ],
            credentials: [
              { type: 'QR', id: 'u1v2...w3x4', status: 'active' },
              { type: 'Badge', id: 'j6k7...l8m9', status: 'active' }
            ],
            accessLevel: 'MEDIA', badgeNumber: 'MF2026-0612'
          },
          {
            id: 8, name: 'Anna Svensson', initials: 'AS', type: 'Crew', affiliation: 'Sound Department', role: 'Audio Engineer',
            entitlementCount: 5,
            entitlements: [
              { name: 'AAA-Access Pass', detail: '(active)', status: 'active', statusLabel: 'Active' },
              { name: 'Backstage Pass', detail: '(active)', status: 'active', statusLabel: 'Active' },
              { name: 'Lunch Voucher', detail: '3/day, 3 used today', status: 'active', statusLabel: 'Limit reached' },
              { name: 'Dinner Voucher', detail: '1/day, 0 used', status: 'active', statusLabel: 'Available' },
              { name: 'Two-Way Radio', detail: 'Radio #156', status: 'collected', statusLabel: 'Collected' }
            ],
            credentials: [
              { type: 'QR', id: 'i9j0...k1l2', status: 'active' },
              { type: 'Badge', id: 'n0o1...p2q3', status: 'active' }
            ],
            accessLevel: 'AAA', badgeNumber: 'MF2026-0189'
          }
        ],

        performSearch() {
          if (!this.searchQuery || this.searchQuery.length < 2) {
            this.searchResults = [];
            return;
          }
          const q = this.searchQuery.toLowerCase();
          this.searchResults = this.allParticipants.filter(p =>
            p.name.toLowerCase().includes(q) ||
            p.affiliation.toLowerCase().includes(q) ||
            p.role.toLowerCase().includes(q)
          );
          this.selectedParticipant = null;
        },

        selectParticipant(participant) {
          this.selectedParticipant = participant;
          this.searchResults = [];

          // Update badge preview
          this.badgeData = {
            name: participant.name.toUpperCase(),
            role: participant.role,
            affiliation: participant.affiliation,
            accessLevel: participant.accessLevel,
            dates: 'Jul 14-17, 2026',
            badgeNumber: participant.badgeNumber
          };

          // Set template based on access level
          const templateMap = {
            'AAA': 'AAA Template',
            'GENERAL': 'General Template',
            'MEDIA': 'Media Template',
            'VIP': 'VIP Template',
            'VOLUNTEER': 'Volunteer Template'
          };
          this.selectedTemplate = templateMap[participant.accessLevel] || 'General Template';
        },

        printBadge() {
          const name = this.selectedParticipant ? this.selectedParticipant.name : this.badgeData.name;
          const template = this.selectedTemplate.replace(' Template', '');

          this.printQueue.push({
            id: Date.now(),
            name: name,
            template: template,
            status: 'queued'
          });

          // Simulate printing progression
          setTimeout(() => {
            const idx = this.printQueue.findIndex(item => item.status === 'printing');
            if (idx >= 0) {
              this.printQueue[idx].status = 'done';
            }
            const nextIdx = this.printQueue.findIndex(item => item.status === 'queued');
            if (nextIdx >= 0) {
              this.printQueue[nextIdx].status = 'printing';
            }
          }, 2000);
        },

        clearPrintQueue() {
          this.printQueue = this.printQueue.filter(item => item.status === 'printing');
        },

        registerWalkIn() {
          if (!this.walkInForm.firstName || !this.walkInForm.lastName || !this.walkInForm.email || !this.walkInForm.type) {
            alert('Please fill in all required fields (First Name, Last Name, Email, Type).');
            return;
          }

          const fullName = this.walkInForm.firstName + ' ' + this.walkInForm.lastName;
          const initials = this.walkInForm.firstName.charAt(0) + this.walkInForm.lastName.charAt(0);

          // Create participant
          const newParticipant = {
            id: Date.now(),
            name: fullName,
            initials: initials,
            type: this.walkInForm.type,
            affiliation: this.walkInForm.affiliation || 'Walk-in',
            role: this.walkInForm.role || '-',
            entitlementCount: this.walkInForm.items.length,
            entitlements: this.walkInForm.items.map(item => ({
              name: item.replace(/-/g, ' ').replace(/\b\w/g, l => l.toUpperCase()),
              detail: '(new)',
              status: 'active',
              statusLabel: 'Active'
            })),
            credentials: [
              { type: 'QR', id: Math.random().toString(36).substr(2, 4) + '...' + Math.random().toString(36).substr(2, 4), status: 'active' }
            ],
            accessLevel: this.walkInForm.type === 'Media' ? 'MEDIA' : this.walkInForm.type === 'Volunteer' ? 'VOLUNTEER' : 'GENERAL',
            badgeNumber: 'MF2026-' + String(Math.floor(Math.random() * 9000 + 1000))
          };

          // Select and show
          this.selectParticipant(newParticipant);
          this.allParticipants.push(newParticipant);

          // Add to print queue
          this.printBadge();

          // Reset form
          this.walkInForm = { firstName: '', lastName: '', email: '', phone: '', type: '', affiliation: '', role: '', items: [] };
          this.showWalkIn = false;

          alert('Walk-in registered: ' + fullName + '\nBadge added to print queue.');
        },

        init() {
          // Pre-populate search with "Kari" for demo
          this.searchQuery = 'Kari';
          this.performSearch();
        }
      };
    }
  </script>
</body>
</html>